(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{230:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return s}));var a=n(2),r=n(9),c=(n(0),n(241)),i={id:"dev-txn-receipt",title:"Receipt"},o={id:"dev/dev-txn-receipt",isDocsHomePage:!1,title:"Receipt",description:"---",source:"@site/docs/dev/dev-txn-receipt.md",permalink:"/dev-portal/docs/dev/dev-txn-receipt",editUrl:"https://github.com/Zilliqa/dev-portal/tree/v1-portal/docs/dev/dev-txn-receipt.md",sidebar:"DevelopersSidebar",previous:{title:"Confirmation",permalink:"/dev-portal/docs/dev/dev-txn-confirmation"}},b=[{value:"Params",id:"params",children:[]},{value:"Events",id:"events",children:[]},{value:"Transitions",id:"transitions",children:[]},{value:"Exception",id:"exception",children:[]}],l={rightToc:b};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("hr",null),Object(c.b)("p",null,"After a transaction is confirmed in the blockchain, a transaction response would be returned along with a ",Object(c.b)("inlineCode",{parentName:"p"},"receipt"),"."),Object(c.b)("p",null,"Example of a transaction response with the ",Object(c.b)("inlineCode",{parentName:"p"},"receipt")," structure:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n  "id": "1",\n  "jsonrpc": "2.0",\n  "result": {\n      // others\n\n    "receipt": {\n      "accepted": true,\n      "cumulative_gas": "878",\n      "epoch_num": "589742",\n      "success": true,\n      "transitions": [\n        {\n          "addr": "0x9a65df55b2668a0f9f5f749267cb351a37e1f3d9",\n          "depth": 0,\n          "msg": {\n            "_amount": "50000000000000",\n            "_recipient": "0xc0e28525e9d329156e16603b9c1b6e4a9c7ed813",\n            "_tag": "onFundsReceived",\n            "params": []\n          }\n        }\n      ]\n    },\n    "senderPubKey": "0x03DE40DF885B0E334D53FF5E5554589AAF46F2339FEBEE93213F2CCE52D1F488F4",\n    "signature": "0xB19AB66C4410EE4833A9C5DEE600471DB4D711F6B61D2312988E6E70CC655409F18BB42BB6940B6263C8EA5CE08CAEC06111BDF19BE00D7E15F25515CAA45DAA",\n    "toAddr": "9a65df55b2668a0f9f5f749267cb351a37e1f3d9",\n    "version": "65537"\n  }\n}\n')),Object(c.b)("p",null,"Depending on the type of transaction (e.g. payment, contract call, chain contract call) being processed, the ",Object(c.b)("inlineCode",{parentName:"p"},"receipt")," may return different data."),Object(c.b)("h2",{id:"params"},"Params"),Object(c.b)("p",null,"This section lists all the ",Object(c.b)("em",{parentName:"p"},"possible"),"  ",Object(c.b)("inlineCode",{parentName:"p"},"receipt")," returned values."),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Name"),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"cumulative_gas")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The total amount of gas used when it is executed in the particular block")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"epoch_num")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The block number when this transaction is allocated to")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"errors")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Contains the error code if the transaction has any errors")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"event_logs")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Contains the parameters of the contract transition being invoked")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"exceptions")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Returns the exception messages if there is an error when invoking contract")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"transitions")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Contains the parameters used to call the specific transition")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"success")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Returns true if the transaction is successfully executed, false otherwise")))),Object(c.b)("h2",{id:"events"},"Events"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"event_logs")," are events created as a result of invoking the contract calls."),Object(c.b)("p",null,"For instance, in the following sample contract code, calling ",Object(c.b)("inlineCode",{parentName:"p"},"setHello"),' transition would trigger a "',Object(c.b)("inlineCode",{parentName:"p"},"setHello"),'" event name.'),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'(* HelloWorld Sample *)\n\ntransition setHello (msg : String)\n  is_owner = builtin eq owner _sender;\n  match is_owner with\n  | False =>\n    e = {_eventname : "setHello()"; code : not_owner_code};\n    event e\n  | True =>\n    welcome_msg := msg;\n    e = {_eventname : "setHello()"; code : set_hello_code}; (* trigger event here *)\n    event e\n  end\nend\n')),Object(c.b)("p",null,"If we execute this transition, the returned ",Object(c.b)("inlineCode",{parentName:"p"},"receipt")," is as follows:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n    "id": "1",\n    "jsonrpc": "2.0",\n    "result": {\n        // others\n        "receipt": {\n            "accepted": false,\n            "cumulative_gas": "668",\n            "epoch_num": "1474081",\n            "event_logs": [\n                {\n                    "_eventname": "setHello()",\n                    "address": "0xde8d3637aec06d6c7da49aeb9c7409ac44a98138",\n                    "params": [\n                        {\n                            "type": "Int32",\n                            "value": "2",\n                            "vname": "code"\n                        }\n                    ]\n                }\n            ],\n            "success": true\n        },\n    }\n}\n')),Object(c.b)("p",null,"Observed that the ",Object(c.b)("inlineCode",{parentName:"p"},"setHello")," event is returned as the ",Object(c.b)("inlineCode",{parentName:"p"},"setHello")," transition is successfully executed by the blockchain."),Object(c.b)("h2",{id:"transitions"},"Transitions"),Object(c.b)("p",null,"A ",Object(c.b)("inlineCode",{parentName:"p"},"transitions")," object is returned if the contract is invoking other procedures or another contract transition. A ",Object(c.b)("inlineCode",{parentName:"p"},"transition"),' object provides details of the "transition chain" such as the address of the initiator, the tag (transition name), the recipient, the params .etc.'),Object(c.b)("p",null,"Example of a ",Object(c.b)("inlineCode",{parentName:"p"},"transition")," object:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'{\n  "id": "1",\n  "jsonrpc": "2.0",\n  "result": {\n    "ID": "52605cee6955b3d14f5478927a90977b305325aff4ae0a2f9dbde758e7b92ad4",\n    "amount": "50000000000000",\n    "data": "{\\"_tag\\":\\"sendFunds\\",\\"params\\":[{\\"vname\\":\\"accountValues\\",\\"type\\":\\"List (AccountValue)\\",\\"value\\":[{\\"constructor\\":\\"AccountValue\\",\\"argtypes\\":[],\\"arguments\\":[\\"0xc0e28525e9d329156e16603b9c1b6e4a9c7ed813\\",\\"50000000000000\\"]}]}]}",\n    "gasLimit": "25000",\n    "gasPrice": "1000000000",\n    "nonce": "3816",\n    "receipt": {\n      "accepted": true,\n      "cumulative_gas": "878",\n      "epoch_num": "589742",\n      "success": true,\n      "transitions": [\n        {\n          "addr": "0x9a65df55b2668a0f9f5f749267cb351a37e1f3d9",\n          "depth": 0,\n          "msg": {\n            "_amount": "50000000000000",\n            "_recipient": "0xc0e28525e9d329156e16603b9c1b6e4a9c7ed813",\n            "_tag": "onFundsReceived",\n            "params": []\n          }\n        }\n      ]\n    },\n    ...\n  }\n}\n')),Object(c.b)("p",null,"In the above example, from the ",Object(c.b)("inlineCode",{parentName:"p"},"data")," object we can observe the ",Object(c.b)("inlineCode",{parentName:"p"},"sendFunds")," transition is invoked here, presumably to send ",Object(c.b)("inlineCode",{parentName:"p"},"50000000000000")," to ",Object(c.b)("inlineCode",{parentName:"p"},"0xc0e28525e9d329156e16603b9c1b6e4a9c7ed813"),". Notice that in the ",Object(c.b)("inlineCode",{parentName:"p"},"transitions")," object,  the ",Object(c.b)("inlineCode",{parentName:"p"},"onFundsReceived")," procedure is subsequently invoked internally, and we can observe the recipient and amount is indeed the transmitted amount."),Object(c.b)("h2",{id:"exception"},"Exception"),Object(c.b)("p",null,"A ",Object(c.b)("inlineCode",{parentName:"p"},"exceptions")," object is returned if the contract specifically raise an error when it encounters issues invoking the transition, for example, invoking a transfer transition without sufficient balance .etc. A ",Object(c.b)("inlineCode",{parentName:"p"},"exceptions")," object contains the ",Object(c.b)("inlineCode",{parentName:"p"},"line")," number of the contract that raised the error and the corresponding exception ",Object(c.b)("inlineCode",{parentName:"p"},"message"),"."),Object(c.b)("p",null,"Example of an ",Object(c.b)("inlineCode",{parentName:"p"},"exceptions")," object:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'"receipt": {\n    ... // others\n    ...\n    "exceptions": [\n        {\n            "line": 87,\n            "message": "Exception thrown: (Message [(_exception : (String \\"Error\\")) ; (code : (Int32 -2))])"\n        },\n        {\n            "line": 100,\n            "message": "Raised from IsAdmin"\n        },\n        {\n            "line": 137,\n            "message": "Raised from ConfigureUsers"\n        }\n    ]\n}\n')))}s.isMDXComponent=!0},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),s=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,i=e.parentName,l=b(e,["components","mdxType","originalType","parentName"]),p=s(n),u=a,m=p["".concat(i,".").concat(u)]||p[u]||d[u]||c;return n?r.a.createElement(m,o(o({ref:t},l),{},{components:n})):r.a.createElement(m,o({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,i=new Array(c);i[0]=u;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var l=2;l<c;l++)i[l]=n[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);