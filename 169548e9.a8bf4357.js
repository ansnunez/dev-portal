(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{141:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return o})),a.d(t,"default",(function(){return b}));var n=a(2),i=a(9),r=(a(0),a(237)),l={id:"dev-tools-zilliqajs",title:"zilliqa-js"},c={id:"dev-tools-zilliqajs",isDocsHomePage:!1,title:"zilliqa-js",description:"Introduction",source:"@site/docs/dev-tools-zilliqajs.md",permalink:"/docs/dev-tools-zilliqajs",editUrl:"https://github.com/Zilliqa/dev-portal/docs/dev-tools-zilliqajs.md",sidebar:"someSidebar2",previous:{title:"Zilliqa SDKs",permalink:"/docs/dev-tools-sdks"},next:{title:"gozilliqa",permalink:"/docs/dev-tools-gozilliqa"}},o=[{value:"Introduction",id:"introduction",children:[]},{value:"Source code",id:"source-code",children:[]},{value:"Releases",id:"releases",children:[]},{value:"Installation",id:"installation",children:[]},{value:"Methods and APIs",id:"methods-and-apis",children:[]},{value:"Demo - ZRC2 Wallet",id:"demo---zrc2-wallet",children:[]}],s={rightToc:o};function b(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"introduction"},"Introduction"),Object(r.b)("p",null,Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library"}),"zilliqa-js")," is a Javascript library that allows you to interact with the Zilliqa network nodes - create wallets, deploy contracts, and invoke transitions to interact with smart contracts."),Object(r.b)("h2",{id:"source-code"},"Source code"),Object(r.b)("p",null,"The Github repository can be found at ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library"}),"https://github.com/Zilliqa/Zilliqa-JavaScript-Library")),Object(r.b)("h2",{id:"releases"},"Releases"),Object(r.b)("p",null,"All releases of zilliqa-js can be found at ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.npmjs.com/package/@zilliqa-js/zilliqa"}),"https://www.npmjs.com/package/@zilliqa-js/zilliqa")),Object(r.b)("p",null,"Release note can be found at ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/releases"}),"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/releases")),Object(r.b)("h2",{id:"installation"},"Installation"),Object(r.b)("p",null,"It is recommended that developers install the JavaScript client by making use\nof the umbrella package ",Object(r.b)("inlineCode",{parentName:"p"},"@zilliqa-js/zilliqa"),". This takes care of bootstrapping the various modules, which are then accessible as members of the\n",Object(r.b)("inlineCode",{parentName:"p"},"Zilliqa")," class."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell"}),"yarn add @zilliqa-js/zilliqa\n# you may also need to install the tslib package.\nyarn add tslib\n# bn.js should be added with the above package. if it is not, install it manually.\nyarn add bn.js\n")),Object(r.b)("h2",{id:"methods-and-apis"},"Methods and APIs"),Object(r.b)("p",null,"The following table provides a description of each module of zilliqa-js and what you may want to use it for. Visit the relevant link of each module to find the detailed description about the methods and apis supported by that module."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"package"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"description"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"dependencies"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-core"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/core"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Core abstractions and base classes, such as ",Object(r.b)("inlineCode",{parentName:"td"},"HTTPProvider")," and network logic for interfacing with the Zilliqa JSON-RPC."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-account"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/account"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"Wallet"),", ",Object(r.b)("inlineCode",{parentName:"td"},"Account")," and ",Object(r.b)("inlineCode",{parentName:"td"},"Transaction")," abstractions live in this package."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/core"),", ",Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/crypto"),", ",Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/util"),", ",Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/proto"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-blockchain"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/blockchain"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Main interface to the Zilliqa ",Object(r.b)("inlineCode",{parentName:"td"},"JSON-RPC"),"."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-contract"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/contract"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Exposes a ",Object(r.b)("inlineCode",{parentName:"td"},"Contracts")," module that takes care of smart contract deployment and interaction."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/account"),", ",Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/blockchain"),", ",Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/core"),", ",Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/util"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-crypto"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/crypto"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Exposes several loosely-coupled cryptographic convenience functions for working with the Zilliqa blockchain and its cryptographic primitives, such as Schnorr signatures."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/util"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-proto"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/proto"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Protobuf source files and corresponding generated JS modules."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-util"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/util"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miscellaneous functions that take care of serialisation/deserialisation and validation."),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",Object(n.a)({parentName:"td"},{href:"https://github.com/Ashlar/zilliqa-js-viewblock"}),Object(r.b)("inlineCode",{parentName:"a"},"@zilliqa-js/viewblock"))),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Library interfacing with ViewBlock's APIs"),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"@zilliqa-js/crypto"))))),Object(r.b)("h2",{id:"demo---zrc2-wallet"},"Demo - ZRC2 Wallet"),Object(r.b)("p",null,"For this demo, we'll be looking at the zilliqa-js related code of a simple ZRC2 wallet, ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Zilliqa/ZRC/blob/master/zrcs/zrc-2.md"}),"ZRC2")," is a standard for fungible tokens on Zilliqa.\nThe full code can be found at ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/arnavvohra/dev-portal-examples/tree/master/zrc-2-wallet"}),"ZRC2 Wallet Repository"),". This repository is written in React but the zilliqa-js methods & APIs can be used with any javascript framework."),Object(r.b)("h4",{id:"generating-private-key-and-address-from-encrypted-wallet-and-a-passphrase"},"Generating private key and address from encrypted wallet and a passphrase"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"import { decryptPrivateKey, getAddressFromPrivateKey} from '@zilliqa-js/crypto';\nlet keystore = JSON.parse(this.state.encryptedWallet);\nconst pk = await decryptPrivateKey(this.state.passphrase, keystore);\nconst address =  getAddressFromPrivateKey(pk);\n")),Object(r.b)("h4",{id:"getting-users-zilliqa-balance"},"Getting user's Zilliqa balance"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"const {Zilliqa} = require('@zilliqa-js/zilliqa');\nconst zilliqa = new Zilliqa('https://dev-api.zilliqa.com');\nlet balanceState = await zilliqa.blockchain.getBalance(userAddress);\nif(balanceState){\n    let balance = balanceState.result.balance;\n    balance = units.fromQa(new BN(balance), units.Units.Zil);// user's zil balance\n}\n")),Object(r.b)("h4",{id:"getting-users-token-balance"},"Getting user's token balance"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"let userAddress = localStorage.getItem(\"userAddress\");//userAddress is retrieved from localStorage in this example\nconst {Zilliqa} = require('@zilliqa-js/zilliqa');\nconst zilliqa = new Zilliqa('https://dev-api.zilliqa.com');\n\nlet smartContractState = await zilliqa.blockchain.getSmartContractState(tokenContractAddress);\nif(smartContractState){\n    let balances_map = smartContractState.result.balances_map;\n    userAddress = userAddress.toLowerCase();\n    let userTokenBalance = balances_map[userAddress];//user's token balance  \n}\n")),Object(r.b)("h4",{id:"sending-tokens-to-another-address-by-calling-transfer-transition-of-the-zrc2-contract"},"Sending tokens to another address by calling 'Transfer' transition of the ZRC2 contract"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"sendTransaction = async() => {\nconst {Zilliqa} = require('@zilliqa-js/zilliqa');\nconst zilliqa = new Zilliqa('https://dev-api.zilliqa.com');\nconst {BN, Long, bytes, units} = require('@zilliqa-js/util');\nconst {toBech32Address, fromBech32Address} = require('@zilliqa-js/crypto');\n\n//You can set the value of the following variables according to your liking\nlet contractAddress = localStorage.getItem(\"token_contract_address\");\nlet recipientAddress = this.state.sendingAddress;\nlet sendingAmount = this.state.sendingAmount;\nlet privkey = localStorage.getItem(\"private_key\");\n\n\nzilliqa.wallet.addByPrivateKey(privkey);\n\nconst CHAIN_ID = 333;\nconst MSG_VERSION = 1;\nconst VERSION = bytes.pack(CHAIN_ID, MSG_VERSION);\n\nconst myGasPrice = units.toQa('1000', units.Units.Li); // Gas Price that will be used by all transactions\ncontractAddress = contractAddress.substring(2);\nrecipientAddress = fromBech32Address(recipientAddress);//converting to ByStr20 format\nconst ftAddr = toBech32Address(contractAddress);\ntry {\n    const contract = zilliqa.contracts.at(ftAddr);\n    const callTx = await contract.call(\n        'Transfer',\n        [\n            {\n                vname: 'to',\n                type: 'ByStr20',\n                value: recipientAddress,\n            },\n            {\n                vname: 'amount',\n                type: 'Uint128',\n                value: sendingAmount,\n            }\n        ],\n        {\n            // amount, gasPrice and gasLimit must be explicitly provided\n            version: VERSION,\n            amount: new BN(0),\n            gasPrice: myGasPrice,\n            gasLimit: Long.fromNumber(10000),\n        }\n    );\n\n} catch (err) {\n    console.log(err);\n}\n}\n\n")))}b.isMDXComponent=!0},237:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=i.a.createContext({}),b=function(e){var t=i.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},d=function(e){var t=b(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},j=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),d=b(a),j=n,u=d["".concat(l,".").concat(j)]||d[j]||p[j]||r;return a?i.a.createElement(u,c(c({ref:t},s),{},{components:a})):i.a.createElement(u,c({ref:t},s))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,l=new Array(r);l[0]=j;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:n,l[1]=c;for(var s=2;s<r;s++)l[s]=a[s];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,a)}j.displayName="MDXCreateElement"}}]);