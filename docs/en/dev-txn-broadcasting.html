<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Broadcasting · Zilliqa Developer Portal</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="After signing the transaction, we may broadcast the transaction to a seed node (e.g. https://dev-api.zilliqa.com) by creating a transaction object. The correct RPC API to use is `CreateTransaction`. "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Broadcasting · Zilliqa Developer Portal"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ansnunez.github.io/dev-portal/"/><meta property="og:description" content="After signing the transaction, we may broadcast the transaction to a seed node (e.g. https://dev-api.zilliqa.com) by creating a transaction object. The correct RPC API to use is `CreateTransaction`. "/><meta property="og:image" content="https://ansnunez.github.io/dev-portal/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ansnunez.github.io/dev-portal/img/docusaurus.png"/><link rel="shortcut icon" href="/dev-portal/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/dev-portal/js/scrollSpy.js"></script><link rel="stylesheet" href="/dev-portal/css/main.css"/><script src="/dev-portal/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/dev-portal/en"><img class="logo" src="/dev-portal/img/zilliqa-logo_1zilliqa-logo.png" alt="Zilliqa Developer Portal"/><h2 class="headerTitleWithLogo">Zilliqa Developer Portal</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/dev-portal/docs/en/basics-intro-blockchain" target="_self">Basics</a></li><li class="siteNavGroupActive"><a href="/dev-portal/docs/en/dev-started-introduction" target="_self">Developers</a></li><li class=""><a href="/dev-portal/docs/en/mining-general-info" target="_self">Miners</a></li><li class=""><a href="/dev-portal/docs/en/staking-getting-started" target="_self">Exchanges</a></li><li class=""><a href="/dev-portal/docs/en/contribute-buildzil" target="_self">Contributors</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/dev-portal/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/dev-portal/docs/zh-CN/dev-txn-broadcasting">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Transaction Lifecycle</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Application Developers</h3><ul class=""><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting Started</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-started-introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-started-helloworld">Hello World</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Development Environments</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-env-isolated">Isolated Server</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-env-testnet">Testnet</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-env-mainnet">Mainnet</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">User Key Management</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-keys-introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-keys-zilpay">Zilpay</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-keys-pkey">Keystore File &amp; Private Key</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-keys-ledger">Ledger</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Toolings for Web3</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-zilliqajs">zilliqa-js</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-gozilliqa">gozilliqa-sdk</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-java">java-sdk</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-cli">CLI-Tools</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-ide">Scilla IDEs</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-explorer">Explorer</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-faucet">Faucet</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Transaction Lifecycle</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-signing">Signing</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/dev-portal/docs/en/dev-txn-broadcasting">Broadcasting</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-polling">Polling</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-confirmation">Confirmation</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-receipt">Receipt</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing and Formal Verification</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-test-checker">Static-checker</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-test-cashflow">Cashflow-Analyzer</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-test-condition">Smart contract condition testing</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-test-formal">Formal verification of contract</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Broadcasting</h1></header><article><div><span><p>After signing the transaction, we may broadcast the transaction to a seed node (e.g. <a href="https://dev-api.zilliqa.com">https://dev-api.zilliqa.com</a>) by creating a transaction object. The correct RPC API to use is <code>CreateTransaction</code>.
Refer to <a href="https://apidocs.zilliqa.com/#createtransaction">https://apidocs.zilliqa.com/#createtransaction</a> for more information.</p>
<p>The seed node performs some basic validation of the JSON payload it receives, and will attempt to verify the signature. Please note that it does not verify the correctness of the <code>nonce</code>. It is at all times the developer's responsiblity to correctly increment the nonce used in the transaction.</p>
<p>If <code>nonce</code> is incorrect, the transaction can silently fail. This means that the seed/lookup node will blindly forward the transaction to the correct shard, which may then reject the transaction with no error receipt.</p>
<p><strong>Note:</strong> The above applies only if we use JSON RPC API to create the transaction object. If SDKs are used to create the transaction object, then <code>nonce</code> management is not an issue as SDKs would automatically handle the nonce management.</p>
<h2><a class="anchor" aria-hidden="true" id="non-contract-transaction-object"></a><a href="#non-contract-transaction-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Non-Contract Transaction Object</h2>
<p>Example of creating a <strong>non-contract</strong> transaction object (ZilliqaJS):</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> { BN, Long, bytes, units } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@zilliqa-js/util'</span>);
<span class="hljs-keyword">const</span> { Zilliqa } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@zilliqa-js/zilliqa'</span>);
<span class="hljs-keyword">const</span> { getAddressFromPrivateKey } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@zilliqa-js/crypto'</span>);
<span class="hljs-keyword">const</span> zilliqa = <span class="hljs-keyword">new</span> Zilliqa(<span class="hljs-string">"https://dev-api.zilliqa.com"</span>);

<span class="hljs-keyword">const</span> PRIVATE_KEY = <span class="hljs-string">'9afc1a1dab96127e902daaaec1a56c30346f007523c787c3bb62371c0e5a1be7'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">try</span> {
        zilliqa.wallet.addByPrivateKey(PRIVATE_KEY);

        <span class="hljs-keyword">let</span> tx = zilliqa.transactions.new({
            <span class="hljs-attr">version</span>: <span class="hljs-number">65537</span>,
            <span class="hljs-attr">toAddr</span>: <span class="hljs-string">"0x1234567890123456789012345678901234567890"</span>,
            <span class="hljs-attr">amount</span>: units.toQa(<span class="hljs-string">"1000"</span>, units.Units.Li),
            <span class="hljs-attr">gasLimit</span>: Long.fromNumber(<span class="hljs-number">1</span>),
        });
        tx = <span class="hljs-keyword">await</span> zilliqa.blockchain.createTransaction(tx);
        <span class="hljs-built_in">console</span>.log(tx.id);
    
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.log(err);
    }

}

main();

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="contract-transaction-object"></a><a href="#contract-transaction-object" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contract Transaction Object</h2>
<p>The following is an example of creating a <strong>contract</strong> transaction object. The difference between <strong>contract</strong> and <strong>non-contract</strong> transaction objects is the additional contract transitions such as <code>setHello</code> and its relevant params such as the <code>vname</code>, <code>type</code> and <code>value</code> as describe in the deployed contract.
The other significant difference is the <code>gasLimit</code> field. For <strong>contract</strong> transaction objects, the recommended <code>gasLimit</code> is between <code>10000</code> to <code>30000</code>.</p>
<p>Example of creating a <strong>contract</strong> transaction object (ZilliqaJS):</p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> { BN, Long, bytes, units } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@zilliqa-js/util'</span>);
<span class="hljs-keyword">const</span> { Zilliqa } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@zilliqa-js/zilliqa'</span>);
<span class="hljs-keyword">const</span> { toBech32Address, getAddressFromPrivateKey } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@zilliqa-js/crypto'</span>);

<span class="hljs-keyword">const</span> zilliqa = <span class="hljs-keyword">new</span> Zilliqa(<span class="hljs-string">"https://dev-api.zilliqa.com"</span>);
<span class="hljs-keyword">const</span> chainId = <span class="hljs-number">333</span>; <span class="hljs-comment">// chainId of the developer testnet</span>
<span class="hljs-keyword">const</span> msgVersion = <span class="hljs-number">1</span>; <span class="hljs-comment">// current msgVersion</span>
<span class="hljs-keyword">const</span> VERSION = bytes.pack(chainId, msgVersion);

<span class="hljs-keyword">const</span> PRIVATE_KEY = <span class="hljs-string">'9afc1a1dab96127e902daaaec1a56c30346f007523c787c3bb62371c0e5a1be7'</span>;
<span class="hljs-keyword">const</span> CONTRACT_ADDR = toBech32Address(<span class="hljs-string">'0x1234567890123456789012345678901234567890'</span>); <span class="hljs-comment">// convert to bech32 format</span>

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">try</span> {
        zilliqa.wallet.addByPrivateKey(PRIVATE_KEY);
        <span class="hljs-keyword">const</span> deployedContract = zilliqa.contracts.at(CONTRACT_ADDR);
        <span class="hljs-keyword">const</span> callTx = <span class="hljs-keyword">await</span> deployedContract.call(
            <span class="hljs-string">'setHello'</span>,
            [
                {
                    <span class="hljs-attr">vname</span>: <span class="hljs-string">'msg'</span>,
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'String'</span>,
                    <span class="hljs-attr">value</span>: <span class="hljs-string">"hello world!"</span>
                }
            ],
            {
                <span class="hljs-attr">version</span>: VERSION,
                <span class="hljs-attr">amount</span>: <span class="hljs-keyword">new</span> BN(<span class="hljs-number">0</span>),
                <span class="hljs-attr">gasPrice</span>: units.toQa(<span class="hljs-string">"1000"</span>, units.Units.Li)
                <span class="hljs-attr">gasLimit</span>: Long.fromNumber(<span class="hljs-number">10000</span>)
            }
        );

        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"transaction: %o"</span>, callTx.id);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(callTx.receipt, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>));
    
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.log(err);
    }

}

main();
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/dev-portal/docs/en/dev-txn-signing"><span class="arrow-prev">← </span><span>Signing</span></a><a class="docs-next button" href="/dev-portal/docs/en/dev-txn-polling"><span>Polling</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#non-contract-transaction-object">Non-Contract Transaction Object</a></li><li><a href="#contract-transaction-object">Contract Transaction Object</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/dev-portal/" class="nav-home"><img src="/dev-portal/img/zilliqa-logo_1zilliqa-logo.png" alt="Zilliqa Developer Portal" width="66" height="70"/></a><div><h5>Links</h5><a href="https://www.github.com/Zilliqa" target="_blank" rel="noreferrer noopener">GitHub</a><a href="https://blog.zilliqa.com/" target="_blank" rel="noreferrer noopener">Medium</a><a href="https://twitter.com/zilliqa" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://discord.gg/XMRE9tt" target="_blank" rel="noreferrer noopener">Discord</a><a href="https://www.youtube.com/channel/UCvinnFbf0u71cajoxKcfZIQ" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2020 Zilliqa Research Pte. Ltd.</section></footer></div></body></html>