(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{157:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return i})),r.d(t,"metadata",(function(){return c})),r.d(t,"rightToc",(function(){return s})),r.d(t,"default",(function(){return l}));var o=r(2),n=r(9),a=(r(0),r(239)),i={id:"core-coinbase",title:"Coinbase Rewards"},c={id:"contributors/core-coinbase",isDocsHomePage:!1,title:"Coinbase Rewards",description:"At each DS epoch, a total of COINBASEREWARDPER_DS QA is distributed to reward miners. Out of this amount, 25% is allocated as the base reward, 5% the lookup reward, and the remainder the cosignature-based reward.",source:"@site/docs/contributors/core-coinbase.md",permalink:"/dev-portal/docs/contributors/core-coinbase",editUrl:"https://github.com/Zilliqa/dev-portal/docs/contributors/core-coinbase.md",sidebar:"ContributorsSidebar",previous:{title:"Proof of Reputation",permalink:"/dev-portal/docs/contributors/core-por"},next:{title:"Guard Mode",permalink:"/dev-portal/docs/contributors/core-guard-mode"}},s=[{value:"Distribution Process",id:"distribution-process",children:[]},{value:"Technical Note",id:"technical-note",children:[]}],d={rightToc:s};function l(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},d,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"At each DS epoch, a total of ",Object(a.b)("inlineCode",{parentName:"p"},"COINBASE_REWARD_PER_DS")," QA is distributed to reward miners. Out of this amount, 25% is allocated as the base reward, 5% the lookup reward, and the remainder the cosignature-based reward."),Object(a.b)("p",null,"The base reward is given to each node equally. Specifically, these nodes are those who gained membership into a shard or the DS committee by doing PoW."),Object(a.b)("p",null,"The lookup reward is distributed to all the lookup nodes equally."),Object(a.b)("p",null,"The cosignature-based reward is distributed to the same base reward recipients in a proportional manner with respect to the number of microblocks (in the case of a shard node) or transaction blocks (in the case of DS nodes) the nodes signed."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Note: Guard nodes do not get rewarded. Their share of the reward is instead stored in the null address.")),Object(a.b)("h2",{id:"distribution-process"},"Distribution Process"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"The distribution of rewards takes place during the vacuous epoch (i.e., the last Tx epoch in the DS epoch)"),Object(a.b)("li",{parentName:"ol"},"The state change (i.e., the subtraction from null address and addition to a node's address) is reflected in the state delta of the DS committee's microblock"),Object(a.b)("li",{parentName:"ol"},"The DS performs consensus over the state delta and the rewards are hence recorded"),Object(a.b)("li",{parentName:"ol"},"Cosignatures from the first Tx epoch (of the current DS epoch) until before the vacuous epoch are considered for cosignature-based rewards distribution"),Object(a.b)("li",{parentName:"ol"},"Cosignatures from shards only are considered for the vacuous epoch (i.e., the Tx block cosignatures by the DS nodes are excluded). This is because the DS committee needs to calculate the coinbase reward distribution first before it performs the consensus that generates the Tx block (with the DS nodes' cosignatures) in the vacuous epoch")),Object(a.b)("h2",{id:"technical-note"},"Technical Note"),Object(a.b)("p",null,"Developers need to take note that the coinbase rewarding data structure is managed in a bit unusual way."),Object(a.b)("p",null,"To keep track of cosignatures for cosignature-based rewarding, we use this convention: ",Object(a.b)("inlineCode",{parentName:"p"},"m_coinbaseRewardees[EPOCH][SHARDID]--\x3e{Cosigs}"),". The epoch number, however, depends on whether the shard ID refers to an actual shard or the DS committee."),Object(a.b)("p",null,"For example, the cosignatures for ",Object(a.b)("inlineCode",{parentName:"p"},"Epoch 5")," with two shards (with ID ",Object(a.b)("inlineCode",{parentName:"p"},"0")," and ",Object(a.b)("inlineCode",{parentName:"p"},"1"),") are stored this way:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"m_coinbaseRewardees[5][0] --\x3e {Cosigs from Microblock proposed by shard 0}\nm_coinbaseRewardees[5][1] --\x3e {Cosigs from Microblock proposed by shard 1}\nm_coinbaseRewardees[6][-1]--\x3e {Cosigs from Tx block mined by DS Committee}\n")),Object(a.b)("p",null,"Notice that the shard ID for the DS committee is ",Object(a.b)("inlineCode",{parentName:"p"},"-1"),". Also, the epoch number is one higher than the epoch number for the shards. This is because ",Object(a.b)("inlineCode",{parentName:"p"},"IncreaseEpochNum()")," is called (inside ",Object(a.b)("inlineCode",{parentName:"p"},"StoreFinalBlock()"),") before ",Object(a.b)("inlineCode",{parentName:"p"},"SaveCoinbase()"),"."))}l.isMDXComponent=!0},239:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return h}));var o=r(0),n=r.n(o);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var d=n.a.createContext({}),l=function(e){var t=n.a.useContext(d),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},b=function(e){var t=l(e.components);return n.a.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},p=n.a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),b=l(r),p=o,h=b["".concat(i,".").concat(p)]||b[p]||u[p]||a;return r?n.a.createElement(h,c(c({ref:t},d),{},{components:r})):n.a.createElement(h,c({ref:t},d))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var d=2;d<a;d++)i[d]=r[d];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,r)}p.displayName="MDXCreateElement"}}]);