<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Keystore File &amp; Private Key · Zilliqa Developer Portal</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Other than ZilPay, DApp "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Keystore File &amp; Private Key · Zilliqa Developer Portal"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ansnunez.github.io/dev-portal/"/><meta property="og:description" content="Other than ZilPay, DApp "/><meta property="og:image" content="https://ansnunez.github.io/dev-portal/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ansnunez.github.io/dev-portal/img/docusaurus.png"/><link rel="shortcut icon" href="/dev-portal/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/dev-portal/js/scrollSpy.js"></script><link rel="stylesheet" href="/dev-portal/css/main.css"/><script src="/dev-portal/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/dev-portal/en"><img class="logo" src="/dev-portal/img/zilliqa-logo_1zilliqa-logo.png" alt="Zilliqa Developer Portal"/><h2 class="headerTitleWithLogo">Zilliqa Developer Portal</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/dev-portal/docs/en/basics-intro-blockchain" target="_self">Basics</a></li><li class="siteNavGroupActive"><a href="/dev-portal/docs/en/dev-started-introduction" target="_self">Developers</a></li><li class=""><a href="/dev-portal/docs/en/mining-getting-started" target="_self">Miners</a></li><li class=""><a href="/dev-portal/docs/en/staking-getting-started" target="_self">Exchanges</a></li><li class=""><a href="/dev-portal/docs/en/contribute-buildzil" target="_self">Contributors</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/dev-portal/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/dev-portal/docs/zh-CN/dev-keys-pkey">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>User Key Management</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Application Developers<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting Started</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-started-introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-started-helloworld">Hello World</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-started-env">Development Environments</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">User Key Management</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-keys-introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-keys-zilpay">ZilPay</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/dev-portal/docs/en/dev-keys-pkey">Keystore File &amp; Private Key</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Toolings for Web3</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-sdks">Zilliqa SDKs</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-zilliqajs">zilliqa-js</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-gozilliqa">gozilliqa</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-java">Java-SDK - LaksaJ</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-websockets">WebSocket Server</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-cli">CLI-Tools</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-ide">Scilla IDEs</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-explorer">Explorer</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-tools-faucet">Faucet</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Transaction Lifecycle</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-signing">Signing</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-broadcasting">Broadcasting</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-polling">Polling</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-confirmation">Confirmation</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/dev-txn-receipt">Receipt</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Keystore File &amp; Private Key</h1></header><article><div><span><p>Other than ZilPay, DApp
DApp developers can allow their users to interact with their dApp by entering their keystore file or private key as well. Although, the recommended strategy for user key management is using a browser add-on like ZilPay.</p>
<p>The following code snippet illustrates how to get the user private key from the encrypted keystore file.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> { decryptPrivateKey } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zilliqa-js/crypto'</span>;
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">privKeyFromKeystore</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> keystore = <span class="hljs-built_in">JSON</span>.parse(encryptedWallet); <span class="hljs-comment">//encryptedWallet is the encrypted keystore file</span>
    <span class="hljs-keyword">let</span> privKey = <span class="hljs-keyword">await</span> decryptPrivateKey(passphrase, keystore); <span class="hljs-comment">//passphrase variable has the passphrase of the encrypted wallet</span>
}
</code></pre>
<p>After we get the private key from the keystore file using <code>zilliqa-js/crypto</code> module, the subsequent steps for doing anything are same.</p>
<p>In the code snippet below, we call the setHello() transition of the Hello World Contract. We assume that in the case of keystore login, the private key was obtained using the above code snippet.</p>
<pre><code class="hljs css language-javascript">  <span class="hljs-keyword">async</span> updateWelcomeMsg(){
    <span class="hljs-comment">//Only the below two lines are different when compared with ZilPay login.</span>
    <span class="hljs-keyword">let</span> zilliqa = <span class="hljs-keyword">new</span> Zilliqa(<span class="hljs-string">'https://dev-api.zilliqa.com'</span>);
    zilliqa.wallet.addByPrivateKey(privkey); <span class="hljs-comment">//Private key was stored in the privKey variable</span>

    <span class="hljs-keyword">let</span> setHelloValue = <span class="hljs-keyword">this</span>.state.setHelloValue; <span class="hljs-comment">//new value of the welcome msg</span>
    <span class="hljs-keyword">let</span> contractAddress = localStorage.getItem(<span class="hljs-string">"contract_address"</span>);
    <span class="hljs-keyword">const</span> CHAIN_ID = <span class="hljs-number">333</span>;
    <span class="hljs-keyword">const</span> MSG_VERSION = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> VERSION = bytes.pack(CHAIN_ID, MSG_VERSION);   
    <span class="hljs-keyword">const</span> myGasPrice = units.toQa(<span class="hljs-string">'1000'</span>, units.Units.Li); <span class="hljs-comment">// Gas Price that will be used by all transactions</span>
    contractAddress = contractAddress.substring(<span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> ftAddr = toBech32Address(contractAddress);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> contract = zilliqa.contracts.at(ftAddr);
        <span class="hljs-keyword">const</span> callTx = <span class="hljs-keyword">await</span> contract.call(
            <span class="hljs-string">'setHello'</span>,
            [
                {
                    <span class="hljs-attr">vname</span>: <span class="hljs-string">'msg'</span>,
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'String'</span>,
                    <span class="hljs-attr">value</span>: setHelloValue
                }
            ],
            {
                <span class="hljs-comment">// amount, gasPrice and gasLimit must be explicitly provided</span>
                <span class="hljs-attr">version</span>: VERSION,
                <span class="hljs-attr">amount</span>: <span class="hljs-keyword">new</span> BN(<span class="hljs-number">0</span>),
                <span class="hljs-attr">gasPrice</span>: myGasPrice,
                <span class="hljs-attr">gasLimit</span>: Long.fromNumber(<span class="hljs-number">10000</span>),
            }
        );
  
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.log(err);
    }
  }
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/dev-portal/docs/en/dev-keys-zilpay"><span class="arrow-prev">← </span><span class="function-name-prevnext">ZilPay</span></a><a class="docs-next button" href="/dev-portal/docs/en/dev-tools-sdks"><span>Zilliqa SDKs</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/dev-portal/" class="nav-home"><img src="/dev-portal/img/zilliqa-logo_1zilliqa-logo.png" alt="Zilliqa Developer Portal" width="66" height="70"/></a><div><h5>Links</h5><a href="https://www.github.com/Zilliqa" target="_blank" rel="noreferrer noopener">GitHub</a><a href="https://blog.zilliqa.com/" target="_blank" rel="noreferrer noopener">Medium</a><a href="https://twitter.com/zilliqa" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://discord.gg/XMRE9tt" target="_blank" rel="noreferrer noopener">Discord</a><a href="https://www.youtube.com/channel/UCvinnFbf0u71cajoxKcfZIQ" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2020 Zilliqa Research Pte. Ltd.</section></footer></div></body></html>