<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Data layer · Zilliqa Developer Portal</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Blockchain Data"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Data layer · Zilliqa Developer Portal"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ansnunez.github.io/dev-portal/"/><meta property="og:description" content="## Blockchain Data"/><meta property="og:image" content="https://ansnunez.github.io/dev-portal/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ansnunez.github.io/dev-portal/img/docusaurus.png"/><link rel="shortcut icon" href="/dev-portal/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/dev-portal/js/scrollSpy.js"></script><link rel="stylesheet" href="/dev-portal/css/main.css"/><script src="/dev-portal/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/dev-portal/en"><img class="logo" src="/dev-portal/img/zilliqa-logo_1zilliqa-logo.png" alt="Zilliqa Developer Portal"/><h2 class="headerTitleWithLogo">Zilliqa Developer Portal</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/dev-portal/docs/en/basics-intro-blockchain" target="_self">Basics</a></li><li class=""><a href="/dev-portal/docs/en/dev-started-helloworld" target="_self">Developers</a></li><li class=""><a href="/dev-portal/docs/en/mining-general-info" target="_self">Miners</a></li><li class=""><a href="/dev-portal/docs/en/staking-getting-started" target="_self">Exchanges</a></li><li class="siteNavGroupActive"><a href="/dev-portal/docs/en/contribute-buildzil" target="_self">Contributors</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/dev-portal/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/dev-portal/docs/zh-CN/core-data">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Core protocol design</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Contribute</h3><ul class=""><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Contribution guide</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/contribute-buildzil">Building Zilliqa</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/contribute-guidelines">Coding and contribution guidelines</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/contribute-bug-bounty">contribute-bug-bounty</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Core protocol design</h4><ul><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-node-operation">General node operation</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-consensus">Consensus</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-network">Network communication and topographies</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-messaging">Messaging</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/dev-portal/docs/en/core-data">Data layer</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-directory-service">Directory service</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-shard">Shard node</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-lookup">Lookup</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-mining">Mining</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-mitigation-measures">Mitigation measures</a></li><li class="navListItem"><a class="navItem" href="/dev-portal/docs/en/core-tools">Tools</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Data layer</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="blockchain-data"></a><a href="#blockchain-data" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Blockchain Data</h2>
<h2><a class="anchor" aria-hidden="true" id="transaction-checks"></a><a href="#transaction-checks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transaction Checks</h2>
<h3><a class="anchor" aria-hidden="true" id="lookup-level"></a><a href="#lookup-level" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lookup level</h3>
<p><a href="https://github.com/Zilliqa/Zilliqa/blob/7b684a25f81dd4e790f596ca19672990c41d4b72/src/libServer/LookupServer.cpp#L309">Validate Txn Function</a></p>
<ol>
<li>Check if the chain ID matches the chain ID of the network. This is done to prevent replay attacks.</li>
<li>Check if the txn code size is within the limits of max code size.</li>
<li>Check if the txn gas price is greater than the minimum gas price required</li>
<li>Check the signature of the corresponding pubKey in the txn</li>
<li>Check if the sender has non-zero balance</li>
<li>If it is a contract creation transaction, check if the txn gas is greater than the minimum gas for a contract creation transaction</li>
<li>If it is a contract call transaction, check if the txn gas is greater than the minimum gas for a contract call transaction.</li>
<li>Check if the txn nonce is not less than the sender nonce.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="shard-level"></a><a href="#shard-level" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shard Level</h3>
<p><a href="https://github.com/Zilliqa/Zilliqa/blob/7b684a25f81dd4e790f596ca19672990c41d4b72/src/libValidator/Validator.cpp#L94">CheckCreatedTransactionFromLookup</a></p>
<ol>
<li>Checks 1,2,3,4,5 are similar as lookup level.</li>
<li>Also if it is a non-DS node, check if the txn is in correct shard.</li>
<li>Also check if the sender has enough balance for the txn.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="local-storage"></a><a href="#local-storage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local Storage</h2>
<h3><a class="anchor" aria-hidden="true" id="lookup-nodes"></a><a href="#lookup-nodes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lookup Nodes</h3>
<ol>
<li>Lookups are full nodes hence they store all the data. Transactions, blocks, microblocks, state, and state deltas (of previous 10 DS epochs) are stored by lookups.</li>
<li>Lookup persistence (specifically <code>lookup-0</code>) is also uploaded to AWS S3 for synchronization of nodes.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="ds-and-shard-nodes"></a><a href="#ds-and-shard-nodes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DS and Shard Nodes</h3>
<ol>
<li>These nodes store DS Blocks, Tx Blocks, current state.</li>
<li>The shard nodes also store processed txns of that DS epoch in temporary storage. These are uploaded to S3 for backup.</li>
<li>The DS nodes also store all the microblocks as they receive them from the shard nodes.</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="cloud-storage"></a><a href="#cloud-storage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cloud Storage</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#authenticated-access">Authenticated Access</a></li>
<li><a href="#unauthenticated-access">Unauthenticated Access</a>
<ul>
<li><a href="#configuring-bucket-policy-in-command-line">Configuring Bucket Policy in Command Line</a></li>
</ul></li>
<li><a href="#references">References</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>Zilliqa network uses AWS Simple Storage Service (S3) to achieve high-volume data transfer, distribution and persistence for blockchain-related data that includes persistence data, snapshot, state deltas, logs and release package.</p>
<p>The following tables shows the storage locations for different objects and their permissions for our nodes running on AWS (through <em>authenticated access</em>) or unlimited access from any nodes (through <em>unauthenticated access</em>). More details can be found in this doc.</p>
<table>
<thead>
<tr><th>Location Pattern</th><th>Authenticated Access</th><th>Unauthenticated Access</th><th>Usage</th></tr>
</thead>
<tbody>
<tr><td><code>s3://&lt;bucket_name&gt;/incremental/&lt;network_name&gt;/*</code></td><td>R/W</td><td>R/-</td><td>persistence snapshot per 10 ds epoch, for joining/rejoining purpose</td></tr>
<tr><td><code>s3://&lt;bucket_name&gt;/statedelta/&lt;network_name&gt;/*</code></td><td>R/W</td><td>R/-</td><td>state deltas for constructing the state</td></tr>
<tr><td><code>s3://&lt;bucket_name&gt;/persistence/*</code></td><td>R/W</td><td>-/-</td><td>persistence tarballs used for recovery/back-up</td></tr>
<tr><td><code>s3://&lt;bucket_name&gt;/logs/&lt;network_name&gt;/*</code></td><td>R/W</td><td>-/-</td><td>logs for each node in the network</td></tr>
<tr><td><code>s3://&lt;bucket_name&gt;/release/*</code></td><td>R/W</td><td>-/-</td><td>release tarballs</td></tr>
<tr><td><code>s3://&lt;bucket_name&gt;/txns-backup/&lt;network_name&gt;/*</code></td><td>R/W</td><td>-/-</td><td>transactions backup</td></tr>
</tbody>
</table>
<blockquote>
<p>Note:</p>
<ol>
<li>This pattern table describes the latest development on <code>master</code> branch in <a href="https://github.com/Zilliqa/testnet">https://github.com/Zilliqa/testnet</a>.</li>
<li><code>&lt;bucket_name&gt;</code> is the bucket name used in <code>bootstrap.py --bucket=&lt;bucket_name&gt;</code>.</li>
<li><code>&lt;network_name&gt;</code> is the network name used in <code>bootstrap.py &lt;network_name&gt;</code>.</li>
<li>Authenticated access is automatically configured during cluster creation.</li>
<li>Unauthenticated access configuration requires manual effort as described at <strong><a href="#configuring-bucket-policy-in-command-line">Configuring Bucket Policy in Command Line</a></strong></li>
<li><code>R/W</code> means read and write. <code>R/-</code> means read-only. <code>-/-</code> means no access allowed.</li>
</ol>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="authenticated-access"></a><a href="#authenticated-access" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authenticated Access</h3>
<p>The authenticated access is automatically configured during cluster creation. The IAM role of the EC2 instances that run Zilliqa nodes will have additional policy configured. An example of the policy document is here:</p>
<pre><code class="hljs css language-json">{
    "Version": "2012-10-17",
    "Statement": [
        {
            ... // other non-S3 policies
        },
        {
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::301978b4-****-****-****-3a2f63c5182c"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "s3:*Object"
            ],
            "Resource": [
                "arn:aws:s3:::301978b4-****-****-****-3a2f63c5182c/*"
            ]
        }
    ]
}
</code></pre>
<p>The requests from these instances will be trasparently authenticated using the IAM role of instances, so the nodes will be allowed to access.</p>
<h3><a class="anchor" aria-hidden="true" id="unauthenticated-access"></a><a href="#unauthenticated-access" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unauthenticated Access</h3>
<p>The unauthenticated access, or public access, is configured manually <a href="#configuring-bucket-policy-in-commandline">using AWS commandline tools</a>. This involves creating a bucket policy document like this:</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"Version"</span>: <span class="hljs-string">"2012-10-17"</span>,
    <span class="hljs-attr">"Statement"</span>: [
        {
            <span class="hljs-attr">"Effect"</span>: <span class="hljs-string">"Allow"</span>,
            <span class="hljs-attr">"Principal"</span>: <span class="hljs-string">"*"</span>,
            <span class="hljs-attr">"Action"</span>: <span class="hljs-string">"s3:ListBucket"</span>,
            <span class="hljs-attr">"Condition"</span>: {
                <span class="hljs-attr">"StringLike"</span>: {
                    <span class="hljs-attr">"s3:prefix"</span>: [
                        <span class="hljs-string">"incremental/*"</span>,
                        <span class="hljs-string">"statedelta/*"</span>
                    ]
                }
            },
            <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"arn:aws:s3:::301978b4-****-****-****-3a2f63c5182c"</span>
        },
        {
            <span class="hljs-attr">"Effect"</span>: <span class="hljs-string">"Allow"</span>,
            <span class="hljs-attr">"Principal"</span>: <span class="hljs-string">"*"</span>,
            <span class="hljs-attr">"Action"</span>: <span class="hljs-string">"s3:GetObject"</span>,
            <span class="hljs-attr">"Resource"</span>: [
                <span class="hljs-string">"arn:aws:s3:::301978b4-****-****-****-3a2f63c5182c/incremental/*"</span>,
                <span class="hljs-string">"arn:aws:s3:::301978b4-****-****-****-3a2f63c5182c/statedelta/*"</span>
            ]
        }
    ]
}
</code></pre>
<blockquote>
<p>Note: This policy document is meant to be configured for a specific S3 bucket in its bucket policy, whereas the policy document in <strong><a href="#authenticated-access">Authenticated Access</a></strong> is meant to be used as IAM policy.</p>
</blockquote>
<p>The use of <code>&quot;Principal&quot;: &quot;*&quot;</code> in the policy allows public access and the condition and resource with prefix limits the access to certain prefixes (or folders).</p>
<h4><a class="anchor" aria-hidden="true" id="configuring-bucket-policy-in-command-line"></a><a href="#configuring-bucket-policy-in-command-line" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring Bucket Policy in Command Line</h4>
<p>Make sure you have admin access to the bucket <code>&lt;bucket-name&gt;</code>. If you are inside the Cloud9 bastion with S3 admin access to <code>&lt;bucket-name&gt;</code>, you can directly invoke the following commands. Otherwise, please configured the AWS credentials in command line first.</p>
<pre><code class="hljs css language-bash">aws s3api put-bucket-policy --bucket &lt;bucket-name&gt; --policy file://policy.json
</code></pre>
<p>The file <code>policy.json</code> should contain a valid bucket policy document as above. Do remember to replace the example bucket name string from <code>301978b4-****-****-****-3a2f63c5182c</code> to the one you are configuring (i.e., <code>&lt;bucket-name&gt;</code>).</p>
<p>Also, try checking the existing policy before and after configuring:</p>
<pre><code class="hljs css language-bash">aws s3api get-bucket-policy --bucket &lt;bucket-name&gt;
</code></pre>
<p>Other commands under <code>aws s3api</code> can be found at <a href="https://docs.aws.amazon.com/cli/latest/reference/s3api/index.html#cli-aws-s3api">AWS documentation</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="references"></a><a href="#references" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h3>
<ul>
<li><a href="https://aws.amazon.com/blogs/security/writing-iam-policies-grant-access-to-user-specific-folders-in-an-amazon-s3-bucket/">Writing IAM Policies: Grant Access to User-Specific Folders in an Amazon S3 Bucket</a></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/dev-portal/docs/en/core-messaging"><span class="arrow-prev">← </span><span>Messaging</span></a><a class="docs-next button" href="/dev-portal/docs/en/core-directory-service"><span>Directory service</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#blockchain-data">Blockchain Data</a></li><li><a href="#transaction-checks">Transaction Checks</a><ul class="toc-headings"><li><a href="#lookup-level">Lookup level</a></li><li><a href="#shard-level">Shard Level</a></li></ul></li><li><a href="#local-storage">Local Storage</a><ul class="toc-headings"><li><a href="#lookup-nodes">Lookup Nodes</a></li><li><a href="#ds-and-shard-nodes">DS and Shard Nodes</a></li></ul></li><li><a href="#cloud-storage">Cloud Storage</a><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#authenticated-access">Authenticated Access</a></li><li><a href="#unauthenticated-access">Unauthenticated Access</a></li><li><a href="#references">References</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/dev-portal/" class="nav-home"><img src="/dev-portal/img/zilliqa-logo_1zilliqa-logo.png" alt="Zilliqa Developer Portal" width="66" height="70"/></a><div><h5>Links</h5><a href="https://www.github.com/Zilliqa" target="_blank" rel="noreferrer noopener">GitHub</a><a href="https://blog.zilliqa.com/" target="_blank" rel="noreferrer noopener">Medium</a><a href="https://twitter.com/zilliqa" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://discord.gg/XMRE9tt" target="_blank" rel="noreferrer noopener">Discord</a><a href="https://www.youtube.com/channel/UCvinnFbf0u71cajoxKcfZIQ" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2020 Zilliqa Research Pte. Ltd.</section></footer></div></body></html>